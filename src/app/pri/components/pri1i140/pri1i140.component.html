<div class="ui-g">
  <div class="ui-g-12 ui-sm-12 ui-md-12 ui-lg-12 ui-xl-12">
    <h4><strong>ข้อมูล Risk Analysis</strong></h4>
    <hr>
  </div>

  <div class="ui-g-12">
    <div class="table-manager-panel">
      <button type="button" pButton label="เพิ่มข้อมูล" icon="fa-plus-square" (click)="addProjRiskAnalystRowData()"></button>
      <button type="button" pButton label="ลบข้อมูล" icon="fa-trash"></button>
    </div>
  </div>

  <div class="ui-g-12 ui-md-12 ui-lg-12 ui-lx-12">
    <p-dataTable [value]="projRiskAnalystList" [(selection)]="selectedProjRiskAnalyst" [rows]="5" [responsive]="true" [paginator]="true"
      emptyMessage="ไม่พบข้อมูลที่ค้นหา" paginatorPosition="top" [pageLinks]="3" [rowsPerPageOptions]="[5,10,20]" [totalRecords]="5">
      <header>
        ข้อมูล Risk Analysis
      </header>
      <p-column [style]="{'width':'35px', 'text-align': 'center'}" selectionMode="multiple"></p-column>
       <p-column [style]="{'width': '7%'}">
        <template pTemplate type="header">
          No.
        </template>
        <template pTemplate let-i="rowIndex" let-projRiskAnalyst="rowData" type="body">
          {{i+1}}
        </template>
      </p-column>
      <p-column [style]="{'width': '15%', 'overflow':'visible'}">
        <template pTemplate type="header">
          Date Raised
        </template>
        <template pTemplate let-i="rowIndex" let-projRiskAnalyst="rowData" type="body">
          <p-inplace [disabled]="!projRiskAnalyst.edit" [active]="projRiskAnalyst.edit">
            <span pInplaceDisplay>
              <p>
                {{projRiskAnalyst.dateRaised|date}}
              </p>
            </span>
            <span pInplaceContent>
              <p-calendar [(ngModel)]="projRiskAnalyst.dateRaised" [showIcon]="true" [inputStyle]="{'width': '65%'}"></p-calendar>
            </span>
          </p-inplace>
        </template>
      </p-column>
      <p-column [style]="{'width': '45%'}">
        <template pTemplate type="header">
          Risk Description
        </template>
        <template pTemplate let-i="rowIndex" let-projRiskAnalyst="rowData" type="body">
          <p-inplace [disabled]="!projRiskAnalyst.edit" [active]="projRiskAnalyst.edit">
            <span pInplaceDisplay>
              <p>
                {{projRiskAnalyst.riskDescription}}
              </p>
            </span>
            <span pInplaceContent>
              <textarea pInputTextarea [(ngModel)]="projRiskAnalyst.riskDescription" style="width: 99%" autoResize="autoResize"></textarea>
            </span>
          </p-inplace>
        </template>
      </p-column>
      <p-column [style]="{'width': '20%', 'overflow':'visible'}">
        <template pTemplate type="header">
          Criticality
        </template>
        <template pTemplate let-i="rowIndex" let-projRiskAnalyst="rowData" type="body">
          <p-inplace [disabled]="!projRiskAnalyst.edit" [active]="projRiskAnalyst.edit">
            <span pInplaceDisplay>
              <p>
                {{projRiskAnalyst.criticality}}
              </p>
            </span>
            <span pInplaceContent>
              <p-dropdown [options]="constant.priCriticality" [(ngModel)]="projRiskAnalyst.criticality" [style]="{'width': '85%'}"></p-dropdown>
            </span>
          </p-inplace>
        </template>
      </p-column>
      <p-column [style]="{'width': '20%'}">
        <template pTemplate type="header">
          Impact
        </template>
        <template pTemplate let-i="rowIndex" let-projRiskAnalyst="rowData" type="body">
          <p-inplace [disabled]="!projRiskAnalyst.edit" [active]="projRiskAnalyst.edit">
            <span pInplaceDisplay>
              <p>
                {{projRiskAnalyst.impact}}
              </p>
            </span>
            <span pInplaceContent>
              <textarea pInputTextarea [(ngModel)]="projRiskAnalyst.impact" style="width: 99%" autoResize="autoResize"></textarea>
            </span>
          </p-inplace>
        </template>
      </p-column>
      <p-column [style]="{'width': '20%'}">
        <template pTemplate type="header">
          Chance
        </template>
        <template pTemplate let-i="rowIndex" let-projRiskAnalyst="rowData" type="body">
          <p-inplace [disabled]="!projRiskAnalyst.edit" [active]="projRiskAnalyst.edit">
            <span pInplaceDisplay>
              <p>
                {{projRiskAnalyst.chance}}
              </p>
            </span>
            <span pInplaceContent>
              <textarea pInputTextarea [(ngModel)]="projRiskAnalyst.chance" style="width: 99%" autoResize="autoResize"></textarea>
            </span>
          </p-inplace>
        </template>
      </p-column>
      <p-column [style]="{'width': '20%'}">
        <template pTemplate type="header">
          Alternative Responses
        </template>
        <template pTemplate let-i="rowIndex" let-projRiskAnalyst="rowData" type="body">
          <p-inplace [disabled]="!projRiskAnalyst.edit" [active]="projRiskAnalyst.edit">
            <span pInplaceDisplay>
              <p>
                {{projRiskAnalyst.alternativeReponses}}
              </p>
            </span>
            <span pInplaceContent>
              <textarea pInputTextarea [(ngModel)]="projRiskAnalyst.alternativeReponses" style="width: 99%" autoResize="autoResize"></textarea>
            </span>
          </p-inplace>
        </template>
      </p-column>
      <p-column [style]="{'width': '10%'}">
        <template pTemplate type="header">
          -
        </template>
        <template let-i="rowIndex" let-projRiskAnalyst="rowData" pTemplate type="body">
          <button type="button" pButton icon="fa-pencil" *ngIf="!projRiskAnalyst.edit" (click)="editProjRiskAnalystRow(i)"></button>
          <button type="button" pButton icon="fa-floppy-o" *ngIf="projRiskAnalyst.edit" (click)="saveEditedProjRiskAnalystRow(projRiskAnalyst, i)"></button>
          <button type="button" pButton icon="fa-ban" *ngIf="projRiskAnalyst.edit" (click)="cancelEditedProjRiskAnalystRow(i)"></button>
        </template>
      </p-column>
    </p-dataTable>
  </div>
</div>